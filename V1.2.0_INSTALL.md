# Proxy Relay System v1.2.0 å®‰è£…è¯´æ˜

## ç‰ˆæœ¬ä¿¡æ¯

- **ç‰ˆæœ¬**: v1.2.0
- **å‘å¸ƒæ—¥æœŸ**: 2026-01-12
- **æ›´æ–°ç±»å‹**: åŠŸèƒ½æ›´æ–°ï¼ˆFeature Releaseï¼‰

## ä¸»è¦æ–°ç‰¹æ€§

âœ¨ **å‡ºå£ä»£ç†æ± ç®¡ç†** - é›†ä¸­ç®¡ç†æ‰€æœ‰å‡ºå£ä»£ç†ï¼Œæ”¯æŒå¤šä¸ªæœ¬åœ°ä»£ç†å¤ç”¨
- æ–°å¢å‡ºå£ä»£ç†æ±  Web ç®¡ç†ç•Œé¢
- æ”¯æŒ SOCKS5/HTTP/VLESS åè®®
- å®Œå…¨å‘åå…¼å®¹ v1.1.0

## å®‰è£…æ–¹å¼

### æ–¹å¼ 1: ä» v1.1.0 å‡çº§ï¼ˆæ¨èï¼‰

å¦‚æœä½ å·²ç»å®‰è£…äº† v1.1.0ï¼Œå¯ä»¥ç›´æ¥å‡çº§ï¼š

```bash
# 1. è§£å‹æ›´æ–°åŒ…
tar -xzf proxy-relay-v1.2.0.tar.gz
cd proxy-relay

# 2. è¿è¡Œæ›´æ–°è„šæœ¬
sudo bash scripts/update_v1.2.0.sh
```

æ›´æ–°è„šæœ¬ä¼šè‡ªåŠ¨ï¼š
- âœ… å¤‡ä»½å½“å‰é…ç½®å’Œæ•°æ®åº“
- âœ… åœæ­¢æœåŠ¡
- âœ… æ›´æ–°ä»£ç 
- âœ… å¯åŠ¨æœåŠ¡
- âœ… éªŒè¯æœåŠ¡çŠ¶æ€

### æ–¹å¼ 2: å…¨æ–°å®‰è£…

å¦‚æœæ˜¯é¦–æ¬¡å®‰è£…ï¼š

```bash
# 1. è§£å‹å®‰è£…åŒ…
tar -xzf proxy-relay-v1.2.0.tar.gz
cd proxy-relay

# 2. è¿è¡Œå®‰è£…è„šæœ¬
sudo bash scripts/install.sh
```

## éªŒè¯å®‰è£…

### 1. æ£€æŸ¥æœåŠ¡çŠ¶æ€

```bash
# æ£€æŸ¥ proxy-relay æœåŠ¡
sudo systemctl status proxy-relay

# æ£€æŸ¥ sing-box æœåŠ¡
sudo systemctl status sing-box
```

### 2. è®¿é—® Web ç•Œé¢

æ‰“å¼€æµè§ˆå™¨è®¿é—®ï¼š`http://your-server-ip:8080`

ä½ åº”è¯¥èƒ½çœ‹åˆ°ï¼š
- æ–°çš„"å‡ºå£ä»£ç†æ± "èœå•é¡¹ï¼ˆå¸¦ v1.2 æ ‡è¯†ï¼‰
- "ä»£ç†ç®¡ç†"å·²æ›´åä¸º"æœ¬åœ°ä»£ç†"

### 3. æµ‹è¯• API

```bash
# è·å–å‡ºå£ä»£ç†åˆ—è¡¨
curl http://localhost:8080/api/upstream-proxies

# è·å–æœ¬åœ°ä»£ç†åˆ—è¡¨
curl http://localhost:8080/api/proxies
```

## å¿«é€Ÿå¼€å§‹

### 1. æ·»åŠ å‡ºå£ä»£ç†

é€šè¿‡ Web ç•Œé¢ï¼š
1. è®¿é—® `http://localhost:8080/upstream-proxies`
2. ç‚¹å‡»"æ·»åŠ å‡ºå£ä»£ç†"
3. å¡«å†™ä»£ç†ä¿¡æ¯
4. ä¿å­˜

æˆ–é€šè¿‡ APIï¼š
```bash
curl -X POST http://localhost:8080/api/upstream-proxies \
  -H "Content-Type: application/json" \
  -d '{
    "id": "us-node-1",
    "name": "ç¾å›½èŠ‚ç‚¹1",
    "enabled": true,
    "proxy": {
      "server": "us.example.com",
      "port": 443,
      "protocol": "vless",
      "uuid": "your-uuid-here",
      "network": "ws",
      "tls": true,
      "sni": "us.example.com",
      "ws_path": "/ws"
    }
  }'
```

### 2. åˆ›å»ºæœ¬åœ°ä»£ç†å¹¶å¼•ç”¨å‡ºå£ä»£ç†

```bash
curl -X POST http://localhost:8080/api/proxies \
  -H "Content-Type: application/json" \
  -d '{
    "local_port": 1080,
    "name": "æœ¬åœ°ä»£ç†1",
    "upstream_id": "us-node-1",
    "monitoring_enabled": true
  }'
```

### 3. æµ‹è¯•è¿æ¥

```bash
# æµ‹è¯•å‡ºå£ä»£ç†
curl -X POST http://localhost:8080/api/upstream-proxies/us-node-1/test

# æµ‹è¯•æœ¬åœ°ä»£ç†
curl -x socks5://localhost:1080 http://www.google.com
```

## é…ç½®è¯´æ˜

### æ–°é…ç½®æ ¼å¼ï¼ˆv1.2.0ï¼‰

ç¼–è¾‘ `/etc/proxy-relay/config.yaml`:

```yaml
# å‡ºå£ä»£ç†æ± ï¼ˆæ–°å¢ï¼‰
upstream_proxies:
  - id: us-node-1
    name: "ç¾å›½èŠ‚ç‚¹1"
    enabled: true
    description: "é«˜é€Ÿç¾å›½èŠ‚ç‚¹"
    tags: ["ç¾å›½", "é«˜é€Ÿ"]
    proxy:
      server: us.example.com
      port: 443
      protocol: vless
      uuid: "your-uuid-here"
      network: ws
      tls: true
      sni: us.example.com
      ws_path: /ws

# æœ¬åœ°ä»£ç†
proxies:
  - local_port: 1080
    name: "æœ¬åœ°ä»£ç†1"
    upstream_id: us-node-1  # å¼•ç”¨å‡ºå£ä»£ç†æ± 
    monitoring_enabled: true
```

### æ—§é…ç½®æ ¼å¼ï¼ˆv1.1.0 - ä»ç„¶æ”¯æŒï¼‰

```yaml
proxies:
  - local_port: 1080
    name: "æœ¬åœ°ä»£ç†1"
    upstream:  # ç›´æ¥é…ç½®
      server: us.example.com
      port: 443
      protocol: vless
      uuid: "your-uuid-here"
    monitoring_enabled: true
```

**æ³¨æ„**: æ–°æ—§æ ¼å¼å¯ä»¥æ··åˆä½¿ç”¨ï¼

## æ–‡æ¡£

å®‰è£…åï¼Œæ–‡æ¡£ä½äº `/opt/proxy-relay/docs/`:

- **å¿«é€Ÿå¼€å§‹**: `V1.2.0_QUICKSTART.md`
- **å‘å¸ƒè¯´æ˜**: `V1.2.0_RELEASE_NOTES.md`
- **æ¶æ„è®¾è®¡**: `UPSTREAM_POOL_ARCHITECTURE.md`
- **å®ŒæˆæŠ¥å‘Š**: `V1.2.0_COMPLETE.md`

## æ•…éšœæ’é™¤

### é—®é¢˜ 1: æœåŠ¡å¯åŠ¨å¤±è´¥

```bash
# æŸ¥çœ‹æ—¥å¿—
sudo journalctl -u proxy-relay -n 50
sudo journalctl -u sing-box -n 50

# æ£€æŸ¥é…ç½®æ–‡ä»¶
sudo proxy-relay validate-config
```

### é—®é¢˜ 2: Web ç•Œé¢æ— æ³•è®¿é—®

```bash
# æ£€æŸ¥ç«¯å£æ˜¯å¦è¢«å ç”¨
sudo netstat -tlnp | grep 8080

# æ£€æŸ¥é˜²ç«å¢™
sudo firewall-cmd --list-ports
```

### é—®é¢˜ 3: å‡ºå£ä»£ç†æ± èœå•ä¸æ˜¾ç¤º

- æ¸…é™¤æµè§ˆå™¨ç¼“å­˜
- å¼ºåˆ¶åˆ·æ–°é¡µé¢ï¼ˆCtrl+F5ï¼‰
- æ£€æŸ¥æœåŠ¡æ˜¯å¦æ­£ç¡®å¯åŠ¨

## å›æ»š

å¦‚æœéœ€è¦å›æ»šåˆ° v1.1.0ï¼š

```bash
# 1. åœæ­¢æœåŠ¡
sudo systemctl stop proxy-relay
sudo systemctl stop sing-box

# 2. æ¢å¤é…ç½®
BACKUP_DIR="/opt/proxy-relay/backup/æœ€æ–°å¤‡ä»½ç›®å½•"
sudo cp $BACKUP_DIR/config.yaml /etc/proxy-relay/config.yaml
sudo cp $BACKUP_DIR/data.db /var/lib/proxy-relay/data.db

# 3. å¯åŠ¨æœåŠ¡
sudo systemctl start sing-box
sudo systemctl start proxy-relay
```

## è·å–å¸®åŠ©

å¦‚æœ‰é—®é¢˜ï¼š
1. æŸ¥çœ‹æ–‡æ¡£ï¼š`/opt/proxy-relay/docs/`
2. æŸ¥çœ‹æ—¥å¿—ï¼š`/var/log/proxy-relay/app.log`
3. æäº¤ Issue

## æ›´æ–°æ—¥å¿—

### v1.2.0 (2026-01-12)

**æ–°å¢åŠŸèƒ½**:
- âœ¨ å‡ºå£ä»£ç†æ± ç®¡ç†
- âœ¨ Web ç•Œé¢æ”¯æŒå‡ºå£ä»£ç†æ± 
- âœ¨ æ”¯æŒå¤šä¸ªæœ¬åœ°ä»£ç†å¤ç”¨åŒä¸€å‡ºå£ä»£ç†
- âœ¨ æ–°å¢ 6 ä¸ª API ç«¯ç‚¹

**æ”¹è¿›**:
- ğŸ”§ æ›´æ–°å¯¼èˆªèœå•
- ğŸ”§ ä¼˜åŒ–é…ç½®æ–‡ä»¶æ ¼å¼
- ğŸ“ æ–°å¢è¯¦ç»†æ–‡æ¡£

**å…¼å®¹æ€§**:
- âœ… å®Œå…¨å‘åå…¼å®¹ v1.1.0
- âœ… æ”¯æŒæ··åˆä½¿ç”¨æ–°æ—§é…ç½®æ ¼å¼

## è®¸å¯è¯

MIT License
