# Proxy Relay v1.2.1 å¼€å‘å®Œæˆ

## ç‰ˆæœ¬ä¿¡æ¯

- **ç‰ˆæœ¬**: v1.2.1
- **å‘å¸ƒæ—¥æœŸ**: 2026-01-12
- **åŒ…å¤§å°**: 133 KB
- **MD5**: 0a8e9278836b95ddf525847c06490ffa
- **çŠ¶æ€**: âœ… å¼€å‘å®Œæˆï¼Œå¾…éƒ¨ç½²æµ‹è¯•

## å®Œæˆçš„åŠŸèƒ½

### âœ… 1. VLESS Reality åè®®å®Œæ•´æ”¯æŒ

#### åç«¯å®ç°

- **models.py**: æ·»åŠ  5 ä¸ª Reality å­—æ®µåˆ° UpstreamProxy æ¨¡å‹
  - `reality: bool`
  - `reality_public_key: Optional[str]`
  - `reality_short_id: Optional[str]`
  - `reality_server_name: Optional[str]`
  - `reality_fingerprint: Optional[str]`

- **vless_parser.py**: è§£æ Reality å‚æ•°
  - URL å‚æ•°: `security=reality`, `pbk`, `sid`, `fp`, `spx`
  - JSON é…ç½®: `reality`, `realityOpts`

- **proxy_manager.py**: ç”Ÿæˆ sing-box Reality é…ç½®
  - `reality` é…ç½®å—ï¼ˆpublic_key, short_idï¼‰
  - `utls` é…ç½®å—ï¼ˆenabled, fingerprintï¼‰

- **web_api.py**: API ç«¯ç‚¹æ”¯æŒ Reality
  - `parse_vless_link`: è¿”å› Reality å­—æ®µ
  - `create_upstream_proxy`: æ¥å— Reality å‚æ•°
  - `update_upstream_proxy`: æ›´æ–° Reality é…ç½®
  - `get_upstream_proxies`: è¿”å› Reality ä¿¡æ¯

#### å‰ç«¯å®ç°

- **upstream_proxies.html**: å®Œæ•´çš„ Reality UI
  - Reality é…ç½®åŒºåŸŸï¼ˆç´«è‰²é«˜äº®ï¼‰
  - 5 ä¸ª Reality è¡¨å•å­—æ®µ
  - uTLS Fingerprint ä¸‹æ‹‰é€‰æ‹©ï¼ˆ10 ä¸ªé€‰é¡¹ï¼‰
  - å­—æ®µéªŒè¯å’Œæç¤º

### âœ… 2. é“¾æ¥å¯¼å…¥åŠŸèƒ½

#### UI å®ç°

- **upstream_proxies.html**: é“¾æ¥å¯¼å…¥ç•Œé¢
  - "æ‰‹åŠ¨é…ç½®" / "é“¾æ¥å¯¼å…¥" åˆ‡æ¢æŒ‰é’®
  - VLESS é“¾æ¥è¾“å…¥æ¡†
  - "è§£æé“¾æ¥" å’Œ "å–æ¶ˆ" æŒ‰é’®
  - è§£ææˆåŠŸæç¤ºä¿¡æ¯

#### JavaScript å®ç°

- **parseVLESSLink()**: é“¾æ¥è§£æå‡½æ•°
  - è°ƒç”¨ `/api/proxies/parse-vless` ç«¯ç‚¹
  - è‡ªåŠ¨å¡«å……æ‰€æœ‰é…ç½®å­—æ®µï¼ˆåŒ…æ‹¬ Realityï¼‰
  - è§£ææˆåŠŸååˆ‡æ¢å›æ‰‹åŠ¨æ¨¡å¼
  - é”™è¯¯å¤„ç†å’Œç”¨æˆ·æç¤º

- **closeModal()**: é‡ç½®é“¾æ¥å¯¼å…¥çŠ¶æ€
  - æ¸…ç©º `vlessLink` å’Œ `parsedInfo`
  - é‡ç½® `showLinkImport` æ ‡å¿—

### âœ… 3. æ–‡æ¡£å®Œå–„

åˆ›å»ºçš„æ–‡æ¡£ï¼š

1. **V1.2.1_INSTALL.md** (131 KB)
   - å¿«é€Ÿå‡çº§å‘½ä»¤
   - åˆ†æ­¥å®‰è£…æŒ‡å—
   - Reality é…ç½®ç¤ºä¾‹
   - å›æ»šè¯´æ˜

2. **docs/V1.2.1_RELEASE_NOTES.md**
   - Reality åè®®è¯¦ç»†è¯´æ˜
   - é“¾æ¥å¯¼å…¥åŠŸèƒ½ä»‹ç»
   - æŠ€æœ¯ç»†èŠ‚å’Œé…ç½®ç¤ºä¾‹
   - å…¼å®¹æ€§è¯´æ˜

3. **docs/V1.2.1_QUICKSTART.md**
   - å¿«é€Ÿå¼€å§‹æŒ‡å—
   - Reality ä½¿ç”¨æ–¹æ³•ï¼ˆé“¾æ¥å¯¼å…¥ + æ‰‹åŠ¨é…ç½®ï¼‰
   - Reality é…ç½®è¯´æ˜è¡¨æ ¼
   - æ•…éšœæ’é™¤

## æµ‹è¯•ç”¨ä¾‹

### Reality é“¾æ¥ç¤ºä¾‹

ç”¨æˆ·æä¾›çš„çœŸå® 3x-ui Reality é“¾æ¥ï¼š
```
vless://23f46d47-ee18-4a8a-8567-c7373da9ed09@23.106.140.228:29517?type=tcp&encryption=none&security=reality&pbk=zom-Pma-d81VT_WBhWx-IxzsymCZZ1mJrspT98wLT24&fp=chrome&sni=yahoo.com&sid=cdf169fff46a80&spx=%2F#japan-y704vwd0
```

è§£æååº”å¾—åˆ°ï¼š
- Server: `23.106.140.228`
- Port: `29517`
- UUID: `23f46d47-ee18-4a8a-8567-c7373da9ed09`
- Protocol: `vless`
- Network: `tcp`
- Encryption: `none`
- Security: `reality`
- Reality Public Key: `zom-Pma-d81VT_WBhWx-IxzsymCZZ1mJrspT98wLT24`
- Reality Short ID: `cdf169fff46a80`
- Reality Server Name: `yahoo.com`
- Reality Fingerprint: `chrome`
- SpiderX: `/`

## éƒ¨ç½²æ­¥éª¤

### 1. ä¸Šä¼ åˆ°æœåŠ¡å™¨

```bash
scp proxy-relay-v1.2.1.tar.gz user@server:/tmp/
```

### 2. åœæ­¢æœåŠ¡

```bash
sudo systemctl stop proxy-relay
```

### 3. å¤‡ä»½æ•°æ®åº“

```bash
sudo cp /var/lib/proxy-relay/proxy_relay.db /var/lib/proxy-relay/proxy_relay.db.v1.2.0
```

### 4. è§£å‹å¹¶æ›´æ–°

```bash
cd /tmp
tar -xzf proxy-relay-v1.2.1.tar.gz
sudo cp -r src/* /opt/proxy-relay/app/src/
```

### 5. é‡å¯æœåŠ¡

```bash
sudo systemctl start proxy-relay
sudo systemctl status proxy-relay
```

### 6. éªŒè¯åŠŸèƒ½

1. è®¿é—® Web ç•Œé¢
2. è¿›å…¥"å‡ºå£ä»£ç†æ± "é¡µé¢
3. ç‚¹å‡»"æ·»åŠ å‡ºå£ä»£ç†"
4. åˆ‡æ¢åˆ°"é“¾æ¥å¯¼å…¥"
5. ç²˜è´´ç”¨æˆ·çš„ Reality é“¾æ¥
6. ç‚¹å‡»"è§£æé“¾æ¥"
7. éªŒè¯æ‰€æœ‰ Reality å­—æ®µæ˜¯å¦æ­£ç¡®å¡«å……
8. ä¿å­˜å¹¶æµ‹è¯•è¿æ¥

## æŠ€æœ¯äº®ç‚¹

### 1. å®Œæ•´çš„ Reality æ”¯æŒ

- âœ… æ•°æ®æ¨¡å‹å±‚ï¼ˆmodels.pyï¼‰
- âœ… è§£æå±‚ï¼ˆvless_parser.pyï¼‰
- âœ… é…ç½®ç”Ÿæˆå±‚ï¼ˆproxy_manager.pyï¼‰
- âœ… API å±‚ï¼ˆweb_api.pyï¼‰
- âœ… UI å±‚ï¼ˆupstream_proxies.htmlï¼‰

### 2. ç”¨æˆ·å‹å¥½çš„é“¾æ¥å¯¼å…¥

- âœ… ä¸€é”®å¯¼å…¥ 3x-ui Reality é“¾æ¥
- âœ… è‡ªåŠ¨å¡«å……æ‰€æœ‰é…ç½®å­—æ®µ
- âœ… æ¸…æ™°çš„æˆåŠŸ/å¤±è´¥æç¤º
- âœ… æ— ç¼åˆ‡æ¢æ‰‹åŠ¨/å¯¼å…¥æ¨¡å¼

### 3. å‘åå…¼å®¹

- âœ… å®Œå…¨å…¼å®¹ v1.2.0 æ•°æ®åº“
- âœ… Reality å­—æ®µä¸ºå¯é€‰
- âœ… ä¼ ç»Ÿ VLESS TLS é…ç½®ä»ç„¶å·¥ä½œ
- âœ… æ— éœ€æ•°æ®åº“è¿ç§»

## ä¸‹ä¸€æ­¥

1. **éƒ¨ç½²åˆ°æµ‹è¯•æœåŠ¡å™¨**
   - ä½¿ç”¨ç”¨æˆ·æä¾›çš„ Reality é“¾æ¥æµ‹è¯•
   - éªŒè¯é“¾æ¥å¯¼å…¥åŠŸèƒ½
   - æµ‹è¯• Reality è¿æ¥

2. **ç”¨æˆ·éªŒè¯**
   - ç¡®è®¤ Reality é…ç½®æ­£ç¡®
   - æµ‹è¯•ä»£ç†è¿æ¥æ€§èƒ½
   - æ”¶é›†ç”¨æˆ·åé¦ˆ

3. **ç”Ÿäº§éƒ¨ç½²**
   - å¦‚æœæµ‹è¯•é€šè¿‡ï¼Œéƒ¨ç½²åˆ°ç”Ÿäº§ç¯å¢ƒ
   - æ›´æ–°ç”¨æˆ·æ–‡æ¡£
   - é€šçŸ¥ç”¨æˆ·æ–°åŠŸèƒ½

## æ–‡ä»¶æ¸…å•

### ä¿®æ”¹çš„æ–‡ä»¶

1. `src/proxy_relay/models.py` - Reality å­—æ®µ
2. `src/proxy_relay/vless_parser.py` - Reality è§£æ
3. `src/proxy_relay/proxy_manager.py` - Reality é…ç½®ç”Ÿæˆ
4. `src/proxy_relay/web_api.py` - Reality API æ”¯æŒ
5. `src/proxy_relay/web/templates/upstream_proxies.html` - Reality UI + é“¾æ¥å¯¼å…¥

### æ–°å¢çš„æ–‡æ¡£

1. `V1.2.1_INSTALL.md` - å®‰è£…æŒ‡å—
2. `docs/V1.2.1_RELEASE_NOTES.md` - å‘å¸ƒè¯´æ˜
3. `docs/V1.2.1_QUICKSTART.md` - å¿«é€Ÿå¼€å§‹
4. `docs/V1.2.1_COMPLETE.md` - æœ¬æ–‡æ¡£

### æ‰“åŒ…æ–‡ä»¶

- `proxy-relay-v1.2.1.tar.gz` (131 KB, MD5: d4c50b0ccade314b0a7aae4e96af9240)

---

**v1.2.1 å¼€å‘å®Œæˆï¼å‡†å¤‡éƒ¨ç½²æµ‹è¯•ã€‚** ğŸ‰
